# 权限管理接口文档

本文档汇总 MCN 运营后台权限管理相关接口，列出了调用每个接口时建议包含的字段，便于前后端对齐数据结构。

## 0. MCN 主体信息

### 0.1 主体信息查询
- **Method**：GET
- **URL**：`/api/mcn`
- **Query 参数**：
  - `tenant_id` *(string, required)*：当前登录主体 ID。
  - `role_id` *(string, optional)*：指定角色标识，未传则返回默认角色信息。
  - `with_statistics` *(boolean, optional, default: true)*：是否返回统计摘要。
- **响应字段**：
  - `tenant` *(object)*：主体信息
    - `tenant_id` *(string)*
    - `tenant_name` *(string)*
    - `tenant_type` *(string)*：如 `mcn`
    - `role` *(string)*：主体当前绑定角色 ID。
  - `user` *(object)*：当前登录用户信息
    - `user_id` *(string)*
    - `user_name` *(string)*
    - `user_phone` *(string)*
    - `role_id` *(string)*
    - `role_name` *(string)*
  - `available_modules` *(array<string>)*：可访问模块 ID（如 `PLUSCO001`）。
  - `available_module_labels` *(array<string>)*：模块中文名称，供前端展示。
    - `module_id` *(string)*
    - `module_label` *(string)*

## 1. MCN 部门管理

### 1.1 部门列表查询（分页）
- **Method**：GET
- **URL**：`/api/mcn/departments`
- **Query 参数**：
  - `tenant_id` *(string, required)*：当前登录主体 ID。
  - `page` *(number, required)*：页码，从 1 开始。
  - `page_size` *(number, required)*：每页条数。
  - `keyword` *(string, optional)*：部门名称模糊搜索。
  - `module_id` *(string, optional)*：按模块权限过滤。
- **响应字段**：
  - `page` *(number)*：当前页码。
  - `page_size` *(number)*：每页条数。
  - `total` *(number)*：总记录数。
  - `items` *(array)*：部门列表，单条包含：
    - `department_id` *(string)*：部门唯一标识。
    - `department_name` *(string)*：部门名称。
    - `permission_modules` *(array<string>)*：部门拥有的模块 ID 列表，例如 `PLUSCO001`。
    - `permission_module_labels` *(array<string>)*：模块中文名称列表。
    - `leader_phone` *(string)*：负责人手机号。

### 1.3 删除部门
- **Method**：PUT
- **URL**：`/api/mcn/departments/{department_id}`
- **Path 参数**：
  - `department_id` *(string, required)*

### 1.4 编辑部门信息
- **Method**：PUT
- **URL**：`/api/mcn/departments/{department_id}`
- **Path 参数**：
  - `department_id` *(string, required)*
- **Body 参数**：
  - `tenant_id` *(string, required)*
  - `department_name` *(string, required)*
  - `permission_modules` *(array<string>, required)*：模块 ID 列表。

## 2. MCN 员工权限管理

### 2.1 员工列表查询（分页）
- **Method**：GET
- **URL**：`/api/mcn/departments/{department_id}/employees`
- **Query 参数**：
  - `department_id` *(string, required)*
  - `page` *(number, required)*
  - `page_size` *(number, required)*
  - `keyword` *(string, optional)*：姓名/手机号模糊搜索。
  - `module_id` *(string, optional)*：按权限模块过滤。
- **响应字段**：
  - `page`, `page_size`, `total`
  - `items` *(array)*：
    - `employee_id` *(string)*
    - `name` *(string)*
    - `phone` *(string)*
    - `module_ids` *(array<string>)*：拥有的模块 ID。
    - `module_labels` *(array<string>)*

### 2.2 新增员工
- **Method**：POST
- **URL**：`/api/mcn/departments/{department_id}/employees`
- **Body 参数**：
  - `tenant_id` *(string, required)*
  - `department_id` *(string, required)*
  - `name` *(string, required)*
  - `phone` *(string, required)*
  - `module_ids` *(array<string>, required)*

### 2.3 删除员工
- **Method**：DELETE
- **URL**：`/api/mcn/departments/{department_id}/employees/{employee_id}`
- **Path 参数**：
  - `department_id` *(string, required)*
  - `employee_id` *(string, required)*

### 2.4 编辑员工信息
- **Method**：PUT
- **URL**：`/api/mcn/departments/{department_id}/employees/{employee_id}`
- **Body 参数**：
  - `tenant_id` *(string, required)*
  - `name` *(string, required)*
  - `phone` *(string, required)*
  - `module_ids` *(array<string>, required)*

## 3. MCN 达人管理

### 3.1 达人列表查询（分页）
- **Method**：GET
- **URL**：`/api/mcn/departments/{department_id}/talents`
- **Query 参数**：
  - `department_id` *(string, required)*
  - `page` *(number, required)*
  - `page_size` *(number, required)*
  - `keyword` *(string, optional)*：达人昵称/姓名模糊搜索。
  - `module_id` *(string, optional)*：按模块能力过滤。
- **响应字段**：
  - `page`, `page_size`, `total`
  - `items` *(array)*：
    - `talent_id` *(string)*
    - `name` *(string)*
    - `phone` *(string)*
    - `module_ids` *(array<string>)*
    - `module_labels` *(array<string>)*

### 3.2 新增达人
- **Method**：POST
- **URL**：`/api/mcn/departments/{department_id}/talents`
- **Body 参数**：
  - `tenant_id` *(string, required)*
  - `department_id` *(string, required)*
  - `name` *(string, required)*
  - `phone` *(string, required)*
  - `module_ids` *(array<string>, required)*

### 3.3 编辑达人信息
- **Method**：PUT
- **URL**：`/api/mcn/departments/{department_id}/talents/{talent_id}`
- **Body 参数**：
  - `tenant_id` *(string, required)*
  - `name` *(string, required)*
  - `phone` *(string, required)*
  - `module_ids` *(array<string>, required)*

### 3.4 删除达人
- **Method**：DELETE
- **URL**：`/api/mcn/departments/{department_id}/talents/{talent_id}`
- **Path 参数**：
  - `department_id` *(string, required)*
  - `talent_id` *(string, required)*

---

> **说明**：
> - 所有时间字段统一使用 ISO8601 格式字符串
> - `module_ids` 建议与现有模块枚举对应（例如 `PLUSCO001`、`PLUSCO002` 等），前端可使用 `module_labels` 用于展示。